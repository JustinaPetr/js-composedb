"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[89],{4852:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(9231);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(a),u=i,h=m["".concat(s,".").concat(u)]||m[u]||c[u]||r;return a?n.createElement(h,l(l({ref:t},d),{},{components:a})):n.createElement(h,l({ref:t},d))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6502:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(6215),i=(a(9231),a(4852));const r={},l="Creating Composites",o={unversionedId:"guides/creating-composites",id:"guides/creating-composites",title:"Creating Composites",description:"Composites are the abstraction ComposeDB tools and client use to represent and manipulate data models used by applications.",source:"@site/docs/guides/creating-composites.md",sourceDirName:"guides",slug:"/guides/creating-composites",permalink:"/js-composedb/docs/guides/creating-composites",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Composites customization",permalink:"/js-composedb/docs/guides/using-composites/customization"},next:{title:"Querying the graph",permalink:"/js-composedb/docs/guides/interacting/queries"}},s={},p=[{value:"Schema Definition Language",id:"schema-definition-language",level:2},{value:"Scalars",id:"scalars",level:2},{value:"Primitive types",id:"primitive-types",level:3},{value:"Identifiers",id:"identifiers",level:3},{value:"Date and time",id:"date-and-time",level:3},{value:"Shapes and lists",id:"shapes-and-lists",level:2},{value:"Directives",id:"directives",level:2},{value:"Model identification",id:"model-identification",level:3},{value:"Constraint validation",id:"constraint-validation",level:3},{value:"Views",id:"views",level:3}],d={toc:p};function c(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"creating-composites"},"Creating Composites"),(0,i.kt)("p",null,"Composites are the abstraction ComposeDB tools and client use to represent and manipulate data models used by applications."),(0,i.kt)("p",null,"In order to create new Composites, especially to create new Models that do not already exist on the Ceramic network, a high-level Schema can be used as an abstraction for the Composite structure, based on ",(0,i.kt)("a",{parentName:"p",href:"https://graphql.org/learn/schema/"},"GraphQL's Schema Definition Language"),"."),(0,i.kt)("h2",{id:"schema-definition-language"},"Schema Definition Language"),(0,i.kt)("p",null,"The Schema Definition Language (SDL) allows to represent scalars (primitive values), shapes (key-value mappings) and lists to describe the Models structure, as well as validation and other metadata information using directives (keywords preceded by the character ",(0,i.kt)("inlineCode",{parentName:"p"},"@"),")."),(0,i.kt)("p",null,"An example Composite Schema can look like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'type Profile @model(accountRelation: SINGLE, description: "Very basic profile") {\n  displayName: String! @length(min: 3, max: 50)\n}\n\ntype Note @model(accountRelation: LIST, description: "Very basic note") {\n  author: DID! @documentAuthor\n  version: CommitID! @documentVersion\n  title: String! @length(min: 10, max: 100)\n  text: String @length(max: 2000)\n}\n')),(0,i.kt)("h2",{id:"scalars"},"Scalars"),(0,i.kt)("p",null,"Scalars represent the leaf values in the graph, either as part of key-value properties in shapes, or value of items in lists. You can learn more about scalars in the ",(0,i.kt)("a",{parentName:"p",href:"https://graphql.org/learn/schema/#scalar-types"},"GraphQL specification"),"."),(0,i.kt)("h3",{id:"primitive-types"},"Primitive types"),(0,i.kt)("p",null,"The following scalars are part of the ",(0,i.kt)("a",{parentName:"p",href:"https://graphql.org/learn/schema/#scalar-types"},"GraphQL specification"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Boolean"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Int"),": A signed 32-bit integer."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Float"),": A signed double-precision floating-point value."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"String"),": A UTF-8 character sequence.")),(0,i.kt)("h3",{id:"identifiers"},"Identifiers"),(0,i.kt)("p",null,"The following scalars represent unique identifiers in the graph. In ComposedDB, they are all stored as string values."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ID"),": A Node identifier used by GraphQL."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CommitID"),": Identifies a specific version of a Stream in the Ceramic network."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DID"),": A Decentralized Identifier, representing an actor able to create and mutate Documents in the graph, using ",(0,i.kt)("a",{parentName:"li",href:"https://www.graphql-scalars.dev/docs/scalars/did"},"GraphQL Scalars"),".")),(0,i.kt)("h3",{id:"date-and-time"},"Date and time"),(0,i.kt)("p",null,"The following scalars can be used to store date and time values using standard representations."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Date"),": RFC 3339 compliant date string without time information, ",(0,i.kt)("inlineCode",{parentName:"li"},"2007-12-03")," for example, using ",(0,i.kt)("a",{parentName:"li",href:"https://www.graphql-scalars.dev/docs/scalars/date"},"GraphQL Scalars"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DateTime"),": A date-time string at UTC, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"2007-12-03T10:15:30Z"),", using ",(0,i.kt)("a",{parentName:"li",href:"https://www.graphql-scalars.dev/docs/scalars/date-time"},"GraphQL Scalars"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Time"),": A time string at UTC, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"10:15:30Z"),", using ",(0,i.kt)("a",{parentName:"li",href:"https://www.graphql-scalars.dev/docs/scalars/time"},"GraphQL Scalars"),".")),(0,i.kt)("h2",{id:"shapes-and-lists"},"Shapes and lists"),(0,i.kt)("p",null,"Scalars and shapes can be composed together in lists and other shapes, such as the ",(0,i.kt)("inlineCode",{parentName:"p"},"ImageMetadata")," shape embedded in the ",(0,i.kt)("inlineCode",{parentName:"p"},"ImageSources")," shape in the following example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},"type ImageMetadata {\n  src: String! @length(max: 150)\n  mimeType: String! @length(max: 50)\n  width: Int! @intRange(min: 1)\n  height: Int! @intRange(min: 1)\n  size: Int @intRange(min: 1)\n}\n\ntype ImageSources {\n  original: ImageMetadata!\n  alternatives: [ImageMetadata] @arrayLength(max: 20)\n}\n")),(0,i.kt)("h2",{id:"directives"},"Directives"),(0,i.kt)("p",null,"Directives provide extra metadata when declaring scalars, lists and shapes."),(0,i.kt)("h3",{id:"model-identification"},"Model identification"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"@model")," directive applies to shapes, indicating the shape needs to be created as a Model. A Composite must contain at least one Model to be valid, otherwise there would be nothing to interact with."),(0,i.kt)("p",null,"When using the ",(0,i.kt)("inlineCode",{parentName:"p"},"@model")," directive, two parameters must be provided:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"accountRelation"),": the type of relation between documents created using the Model and the account controlling the document, which can be ",(0,i.kt)("inlineCode",{parentName:"li"},"SINGLE")," for a single document of the given Model (for example profile information), or ",(0,i.kt)("inlineCode",{parentName:"li"},"LIST")," for a potentially infinite list of documents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"description"),": a string describing the Model, to help with discovery.")),(0,i.kt)("h3",{id:"constraint-validation"},"Constraint validation"),(0,i.kt)("p",null,"The following directives provide validation information on primitive scalars and lists:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@intRange"),": defines the required ",(0,i.kt)("inlineCode",{parentName:"li"},"max")," and optional ",(0,i.kt)("inlineCode",{parentName:"li"},"min")," value for ",(0,i.kt)("inlineCode",{parentName:"li"},"Int")," scalars."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@floatRange"),": defines the required ",(0,i.kt)("inlineCode",{parentName:"li"},"max")," and optional ",(0,i.kt)("inlineCode",{parentName:"li"},"min")," value for ",(0,i.kt)("inlineCode",{parentName:"li"},"Float")," scalars."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@length"),": defines the required ",(0,i.kt)("inlineCode",{parentName:"li"},"max")," and optional ",(0,i.kt)("inlineCode",{parentName:"li"},"min")," value for ",(0,i.kt)("inlineCode",{parentName:"li"},"String")," scalars."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@arrayLength"),": defines the required ",(0,i.kt)("inlineCode",{parentName:"li"},"max")," and optional ",(0,i.kt)("inlineCode",{parentName:"li"},"min")," numbers of items in a list.")),(0,i.kt)("h3",{id:"views"},"Views"),(0,i.kt)("p",null,"View directives represent read-only fields that are not part of the document contents, but rather from metadata."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@documentAccount"),": defines a field as being a view to the account controlling the document, using the ",(0,i.kt)("inlineCode",{parentName:"li"},"DID")," scalar type. For example: ",(0,i.kt)("inlineCode",{parentName:"li"},"author: DID! @documentAccount"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@documentVersion"),": defines a field as being a view to the current version of the document, using the ",(0,i.kt)("inlineCode",{parentName:"li"},"CommitID")," scalar type. For example: ",(0,i.kt)("inlineCode",{parentName:"li"},"version: CommitID! @documentVersion"),".")))}c.isMDXComponent=!0}}]);